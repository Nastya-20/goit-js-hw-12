{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '44783480-725b805b80ef605c474d620ee';\n\nexport async function searchImages(query, page) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n  try {\n    const response = await axios.get(url);\n    if (response.status !== 200) {\n      throw new Error('Network response was not ok');\n    }\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function initializeLightbox() {\n  lightbox = new SimpleLightbox('.gallery a');\n}\n\nexport function refreshLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\n\nexport function renderImages(images, append = false) {\n  const gallery = document.getElementById('gallery');\n\n  const markup = images.map(image => {\n    return `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        <div class=\"info\">\n          <p>Likes: <span class=\"number\">${image.likes}</span></p>\n          <p>Views: <span class=\"number\">${image.views}</span></p>\n          <p>Comments: <span class=\"number\">${image.comments}</span></p>\n          <p>Downloads: <span class=\"number\">${image.downloads}</span></p>\n        </div>\n      </a>\n    `;\n  }).join('');\n\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  } else {\n    gallery.innerHTML = markup;\n  }\n}\n\n\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImages } from './js/pixabay-api.js';\nimport { renderImages, initializeLightbox, refreshLightbox } from './js/render-functions.js';\n\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('search-input');\nconst loader = document.querySelector('.loader');\nconst gallery = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\n// Ініціализація SimpleLightbox\ninitializeLightbox();\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  currentQuery = searchInput.value.trim();\n\n  if (!currentQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query.'\n    });\n    return;\n  }\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  try {\n    showLoader();// Показати завантажувач перед запитом\n    const images = await searchImages(currentQuery, currentPage);\n    totalHits = images.totalHits;\n    renderImages(images.hits); // Відобразити зображення в галереї\n\n    if (images.hits.length > 0) {\n      loadMoreBtn.style.display = 'block';\n    }\n// Очистити input після успішного пошука та рендерінга зображень\n    searchInput.value = '';\n    refreshLightbox(); // Оновити SimpleLightbox\n    } catch (error) {\n      console.error('Error searching images:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images. Please try again later.'\n      });\n} finally {\n      hideLoader(); // Приховати завантажувач після завершення запиту (незалежно від результату)\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    showLoader();\n    const images = await searchImages(currentQuery, currentPage);\n    renderImages(images.hits, true);\n\n    if (currentPage * 15 >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\"\n      });\n    }\n\n    refreshLightbox();\n    smoothScroll();\n  } catch (error) {\n    console.error('Error loading more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.'\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showLoader() {\n  loader.style.display = 'block';\n  gallery.innerHTML = ''; // Очистити галерею перед показом нових зображень\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\nfunction smoothScroll() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["apiKey","searchImages","query","page","url","response","axios","error","lightbox","initializeLightbox","SimpleLightbox","refreshLightbox","renderImages","images","append","gallery","markup","image","searchForm","searchInput","loader","loadMoreBtn","currentPage","currentQuery","totalHits","event","iziToast","showLoader","hideLoader","smoothScroll","cardHeight"],"mappings":"owBAEA,MAAMA,EAAS,qCAER,eAAeC,EAAaC,EAAOC,EAAM,CAC9C,MAAMC,EAAM,gCAAgCJ,CAAM,MAAM,mBAAmBE,CAAK,CAAC,6EAA6EC,CAAI,GAClK,GAAI,CACF,MAAME,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,6BAA6B,EAE/C,OAAOA,EAAS,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCbA,IAAIC,EAEG,SAASC,GAAqB,CACnCD,EAAW,IAAIE,EAAe,YAAY,CAC5C,CAEO,SAASC,GAAkB,CAC5BH,GACFA,EAAS,QAAO,CAEpB,CAEO,SAASI,EAAaC,EAAQC,EAAS,GAAO,CACnD,MAAMC,EAAU,SAAS,eAAe,SAAS,EAE3CC,EAASH,EAAO,IAAII,GACjB;AAAA,iBACMA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,2CAEfA,EAAM,KAAK;AAAA,2CACXA,EAAM,KAAK;AAAA,8CACRA,EAAM,QAAQ;AAAA,+CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAI3D,EAAE,KAAK,EAAE,EAENH,EACFC,EAAQ,mBAAmB,YAAaC,CAAM,EAE9CD,EAAQ,UAAYC,CAExB,CC/BA,MAAME,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCL,EAAU,SAAS,eAAe,SAAS,EAC3CM,EAAc,SAAS,eAAe,aAAa,EAEzD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAGhBf,IAEAS,EAAW,iBAAiB,SAAU,MAAOO,GAAU,CAIrD,GAHAA,EAAM,eAAc,EACpBF,EAAeJ,EAAY,MAAM,OAE7B,CAACI,EAAc,CACjBG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDJ,EAAc,EACdP,EAAQ,UAAY,GACpBM,EAAY,MAAM,QAAU,OAE5B,GAAI,CACFM,IACA,MAAMd,EAAS,MAAMZ,EAAasB,EAAcD,CAAW,EAC3DE,EAAYX,EAAO,UACnBD,EAAaC,EAAO,IAAI,EAEpBA,EAAO,KAAK,OAAS,IACvBQ,EAAY,MAAM,QAAU,SAG9BF,EAAY,MAAQ,GACpBR,GACC,OAAQJ,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9CmB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACjB,CAAO,CACP,QAAU,CACJE,GACD,CACL,CAAC,EAEDP,EAAY,iBAAiB,QAAS,SAAY,CAChDC,GAAe,EAEf,GAAI,CACFK,IACA,MAAMd,EAAS,MAAMZ,EAAasB,EAAcD,CAAW,EAC3DV,EAAaC,EAAO,KAAM,EAAI,EAE1BS,EAAc,IAAME,IACtBH,EAAY,MAAM,QAAU,OAC5BK,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAGHf,IACAkB,GACD,OAAQtB,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDmB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACf,CAAK,CACL,QAAY,CACRE,GACD,CACH,CAAC,EAED,SAASD,GAAa,CACpBP,EAAO,MAAM,QAAU,QACvBL,EAAQ,UAAY,EACtB,CAEA,SAASa,GAAa,CACpBR,EAAO,MAAM,QAAU,MACzB,CACA,SAASS,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAU,EAAKf,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACd,IAAKe,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}